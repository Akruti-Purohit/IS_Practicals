#include <stdio.h>
#include <string.h>
#include <ctype.h>

void process(char text[], char key[], char result[], int encrypt) {
    int key_len = strlen(key), j = 0;
    for (int i = 0; text[i]; i++) {
        char c = text[i];
        if (isalpha(c)) {
            c = toupper(c);
            result[i] = (c - 'A' + (encrypt ? (toupper(key[j++ % key_len]) - 'A') : -(toupper(key[j++ % key_len]) - 'A') + 26)) % 26 + 'A');
        } else {
            result[i] = c;
        }
    }
    result[strlen(text)] = '\0'; // Null-terminate the result
}

int main() {
    char plaintext[100], ciphertext[100], decryptedtext[100];
    char key[100];

    // Input plaintext
    printf("Enter plaintext: ");
    fgets(plaintext, sizeof(plaintext), stdin);
    plaintext[strcspn(plaintext, "\n")] = '\0'; // Remove newline character

    // Input key
    printf("Enter key: ");
    fgets(key, sizeof(key), stdin);
    key[strcspn(key, "\n")] = '\0'; // Remove newline character

    // Encrypt the plaintext
    process(plaintext, key, ciphertext, 1);
    printf("Encrypted text: %s\n", ciphertext);

    // Decrypt the ciphertext
    process(ciphertext, key, decryptedtext, 0);
    printf("Decrypted text: %s\n", decryptedtext);

    return 0;
}
/*
Enter plaintext: Welcome to DSU
Enter key: keyword
Encrypted text: XNVRBQRWUFJ
Decrypted text: WELCOME TO DSU
*/
